import{S as j,i as L,s as U,e as p,t as T,c as g,a as b,h as B,d as _,b as k,f as M,g as v,J as m,K as R,j as H,E as O,L as y,n as K,o as $,p as z,q as w,v as ee,l as q,k as I,m as J,M as F,w as P,x as Q,y as X,B as Y,N as te}from"../chunks/index-8c70ec66.js";import{w as C}from"../chunks/index-2efb8b73.js";const N=C({socket:null,loading:!0}),S=C([]),Z=[],E=C(Z),oe=()=>{const c=new WebSocket("/ws");return N.update(()=>({socket:c,loading:!1})),c.addEventListener("open",function(){console.log("It's open")}),c.addEventListener("message",function(e){if(e.data&&e.data.startsWith("board")){const o=JSON.parse(e.data.split(`
`)[1]);console.log(Z),E.update(()=>o)}else if(e.data&&e.data.startsWith("rooms"))S.update(()=>e.data.split(`
`).slice(1,-1));else{const o=JSON.parse(e.data.split(`
`)[1]);console.log({result:o}),E.update(t=>t.map(l=>(console.log(l,o),l.tile_num!=o.tile_num?l:o)))}}),c};function le(c){let e,o,t,l;return{c(){e=p("button"),o=T(c[0]),this.h()},l(r){e=g(r,"BUTTON",{class:!0,style:!0});var n=b(e);o=B(n,c[0]),n.forEach(_),this.h()},h(){k(e,"class","h-20 shrink-1 grow-1 grid-button border border-gray-300 sm:border-6 svelte-84fhyl"),M(e,"background-color",c[1]||"white")},m(r,n){v(r,e,n),m(e,o),t||(l=R(e,"click",c[2]),t=!0)},p(r,[n]){n&1&&H(o,r[0]),n&2&&M(e,"background-color",r[1]||"white")},i:O,o:O,d(r){r&&_(e),t=!1,l()}}}function ne(c,e,o){let{tile_num:t}=e,{color:l}=e;function r(){const n=y(N);n.socket&&n.socket.send(JSON.stringify({tile_num:t}))}return c.$$set=n=>{"tile_num"in n&&o(0,t=n.tile_num),"color"in n&&o(1,l=n.color)},[t,l,r]}class re extends j{constructor(e){super(),L(this,e,ne,le,U,{tile_num:0,color:1})}}function D(c,e,o){const t=c.slice();return t[10]=e[o],t}function G(c,e,o){const t=c.slice();return t[7]=e[o],t[9]=o,t}function se(c){let e,o,t,l,r,n,f,s=c[1].length>0&&V(c);return{c(){e=p("div"),o=p("button"),t=T("Create Room"),l=I(),r=p("ul"),s&&s.c(),this.h()},l(i){e=g(i,"DIV",{class:!0});var u=b(e);o=g(u,"BUTTON",{class:!0});var a=b(o);t=B(a,"Create Room"),a.forEach(_),l=J(u),r=g(u,"UL",{class:!0});var d=b(r);s&&s.l(d),d.forEach(_),u.forEach(_),this.h()},h(){k(o,"class","px-8 py-1 max-w-[30%] text-m text-black-600 font-semibold bg-gray-50 rounded border border-gray-200 hover:text-white hover:bg-purple-600 hover:border-transparent focus:outline-none focus:ring-2 focus:ring-purple-600 focus:ring-offset-2"),k(r,"class","flex flex-col gap-5"),k(e,"class","flex m-7 flex-col gap-9 ")},m(i,u){v(i,e,u),m(e,o),m(o,t),m(e,l),m(e,r),s&&s.m(r,null),n||(f=R(o,"click",c[3]),n=!0)},p(i,u){i[1].length>0?s?s.p(i,u):(s=V(i),s.c(),s.m(r,null)):s&&(s.d(1),s=null)},i:O,o:O,d(i){i&&_(e),s&&s.d(),n=!1,f()}}}function ie(c){let e,o,t,l,r,n,f,s=c[0],i=[];for(let a=0;a<s.length;a+=1)i[a]=A(G(c,s,a));const u=a=>$(i[a],1,1,()=>{i[a]=null});return{c(){e=p("button"),o=T("Exit"),t=I(),l=p("div");for(let a=0;a<i.length;a+=1)i[a].c();this.h()},l(a){e=g(a,"BUTTON",{class:!0});var d=b(e);o=B(d,"Exit"),d.forEach(_),t=J(a),l=g(a,"DIV",{class:!0});var h=b(l);for(let x=0;x<i.length;x+=1)i[x].l(h);h.forEach(_),this.h()},h(){k(e,"class","mt-3 px-6 p-3 max-w-sm mx-auto bg-white text-black-600 font-semibold rounded-xl shadow-lg flex items-center border border-gray-200 space-x-4 hover:text-white hover:bg-purple-600 hover:border-transparent focus:outline-none focus:ring-2 focus:ring-purple-600 focus:ring-offset-2"),k(l,"class","flex flex-wrap m-7 justify-center")},m(a,d){v(a,e,d),m(e,o),v(a,t,d),v(a,l,d);for(let h=0;h<i.length;h+=1)i[h].m(l,null);r=!0,n||(f=R(e,"click",c[5]),n=!0)},p(a,d){if(d&1){s=a[0];let h;for(h=0;h<s.length;h+=1){const x=G(a,s,h);i[h]?(i[h].p(x,d),w(i[h],1)):(i[h]=A(x),i[h].c(),w(i[h],1),i[h].m(l,null))}for(K(),h=s.length;h<i.length;h+=1)u(h);z()}},i(a){if(!r){for(let d=0;d<s.length;d+=1)w(i[d]);r=!0}},o(a){i=i.filter(Boolean);for(let d=0;d<i.length;d+=1)$(i[d]);r=!1},d(a){a&&_(e),a&&_(t),a&&_(l),F(i,a),n=!1,f()}}}function V(c){let e,o=c[1],t=[];for(let l=0;l<o.length;l+=1)t[l]=W(D(c,o,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=q()},l(l){for(let r=0;r<t.length;r+=1)t[r].l(l);e=q()},m(l,r){for(let n=0;n<t.length;n+=1)t[n].m(l,r);v(l,e,r)},p(l,r){if(r&18){o=l[1];let n;for(n=0;n<o.length;n+=1){const f=D(l,o,n);t[n]?t[n].p(f,r):(t[n]=W(f),t[n].c(),t[n].m(e.parentNode,e))}for(;n<t.length;n+=1)t[n].d(1);t.length=o.length}},d(l){F(t,l),l&&_(e)}}}function W(c){let e,o,t,l=c[10]+"",r,n,f,s;function i(){return c[6](c[10])}return{c(){e=p("li"),o=p("button"),t=T("Join Room "),r=T(l),n=I(),this.h()},l(u){e=g(u,"LI",{});var a=b(e);o=g(a,"BUTTON",{class:!0});var d=b(o);t=B(d,"Join Room "),r=B(d,l),d.forEach(_),n=J(a),a.forEach(_),this.h()},h(){k(o,"class","px-8 py-1 w-[70%] text-m text-black-600 font-semibold bg-gray-50 rounded border border-gray-200 hover:text-white hover:bg-purple-600 hover:border-transparent focus:outline-none focus:ring-2 focus:ring-purple-600 focus:ring-offset-2")},m(u,a){v(u,e,a),m(e,o),m(o,t),m(o,r),m(e,n),f||(s=R(o,"click",i),f=!0)},p(u,a){c=u,a&2&&l!==(l=c[10]+"")&&H(r,l)},d(u){u&&_(e),f=!1,s()}}}function A(c){let e,o;return e=new re({props:{tile_num:c[7].tile_num,color:c[7].color}}),{c(){P(e.$$.fragment)},l(t){Q(e.$$.fragment,t)},m(t,l){X(e,t,l),o=!0},p(t,l){const r={};l&1&&(r.tile_num=t[7].tile_num),l&1&&(r.color=t[7].color),e.$set(r)},i(t){o||(w(e.$$.fragment,t),o=!0)},o(t){$(e.$$.fragment,t),o=!1},d(t){Y(e,t)}}}function ce(c){let e,o,t,l;const r=[ie,se],n=[];function f(s,i){return s[0]&&s[0].length>0?0:s[2]?-1:1}return~(o=f(c))&&(t=n[o]=r[o](c)),{c(){e=p("div"),t&&t.c(),this.h()},l(s){e=g(s,"DIV",{class:!0});var i=b(e);t&&t.l(i),i.forEach(_),this.h()},h(){k(e,"class","")},m(s,i){v(s,e,i),~o&&n[o].m(e,null),l=!0},p(s,[i]){let u=o;o=f(s),o===u?~o&&n[o].p(s,i):(t&&(K(),$(n[u],1,1,()=>{n[u]=null}),z()),~o?(t=n[o],t?t.p(s,i):(t=n[o]=r[o](s),t.c()),w(t,1),t.m(e,null)):t=null)},i(s){l||(w(t),l=!0)},o(s){$(t),l=!1},d(s){s&&_(e),~o&&n[o].d()}}}function ae(c,e,o){let t=y(E),l=y(S),r=!0;ee(()=>{oe(),E.subscribe(u=>{console.log({changed:u}),o(0,t=y(E)),o(2,r=!1)}),S.subscribe(()=>{o(1,l=y(S))})});function n(){const u=y(N);u.socket&&u.socket.send("create")}function f(u){const a=y(N);a.socket&&a.socket.send(`join
${u}`)}function s(){const u=y(N);u.socket&&(u.socket.send("exit"),E.update(()=>[]))}return[t,l,r,n,f,s,u=>{f(u)}]}class ue extends j{constructor(e){super(),L(this,e,ae,ce,U,{})}}function fe(c){let e,o,t,l,r;return l=new ue({}),{c(){e=p("meta"),o=I(),t=p("section"),P(l.$$.fragment),this.h()},l(n){const f=te('[data-svelte="svelte-t32ptj"]',document.head);e=g(f,"META",{name:!0,content:!0}),f.forEach(_),o=J(n),t=g(n,"SECTION",{});var s=b(t);Q(l.$$.fragment,s),s.forEach(_),this.h()},h(){document.title="Home",k(e,"name","description"),k(e,"content","Svelte demo app")},m(n,f){m(document.head,e),v(n,o,f),v(n,t,f),X(l,t,null),r=!0},p:O,i(n){r||(w(l.$$.fragment,n),r=!0)},o(n){$(l.$$.fragment,n),r=!1},d(n){_(e),n&&_(o),n&&_(t),Y(l)}}}const _e=!0;class me extends j{constructor(e){super(),L(this,e,null,fe,U,{})}}export{me as default,_e as prerender};
