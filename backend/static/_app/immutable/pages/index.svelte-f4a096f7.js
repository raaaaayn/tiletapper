import{S as J,i as L,s as U,e as b,t as N,c as v,a as p,h as B,d as u,b as m,f as D,g as k,J as g,K as $,j as P,E as w,L as x,n as Z,o as O,p as z,q as E,v as oe,l as V,k as I,m as j,M as F,w as Q,x as X,y as Y,B as ee,N as M,O as R,P as re}from"../chunks/index-565ecce0.js";import{w as A}from"../chunks/index-60be8484.js";const C=A({socket:null,loading:!0}),S=A([]),te=[],T=A(te),ne=()=>{const i=new WebSocket("/ws");return C.update(()=>({socket:i,loading:!1})),i.addEventListener("open",function(){console.log("It's open")}),i.addEventListener("message",function(e){if(e.data&&e.data.startsWith("board")){const t=JSON.parse(e.data.split(`
`)[1]);console.log(te),T.update(()=>t)}else if(e.data&&e.data.startsWith("rooms"))S.update(()=>e.data.split(`
`).slice(1,-1));else{const t=JSON.parse(e.data.split(`
`)[1]);console.log({result:t}),T.update(o=>o.map(r=>(console.log(r,t),r.tile_num!=t.tile_num?r:t)))}}),i};function le(i){let e,t,o,r;return{c(){e=b("button"),t=N(i[0]),this.h()},l(l){e=v(l,"BUTTON",{class:!0,style:!0});var n=p(e);t=B(n,i[0]),n.forEach(u),this.h()},h(){m(e,"class","h-20 shrink-1 grow-1 grid-button border border-gray-300 sm:border-6 svelte-16pgu09"),D(e,"background-color",i[1]||"white")},m(l,n){k(l,e,n),g(e,t),o||(r=$(e,"click",i[2]),o=!0)},p(l,[n]){n&1&&P(t,l[0]),n&2&&D(e,"background-color",l[1]||"white")},i:w,o:w,d(l){l&&u(e),o=!1,r()}}}function se(i,e,t){let{tile_num:o}=e,{color:r}=e;function l(){const n=x(C);n.socket&&n.socket.send(JSON.stringify({tile_num:o}))}return i.$$set=n=>{"tile_num"in n&&t(0,o=n.tile_num),"color"in n&&t(1,r=n.color)},[o,r,l]}class ae extends J{constructor(e){super(),L(this,e,se,le,U,{tile_num:0,color:1})}}function q(i,e,t){const o=i.slice();return o[11]=e[t],o}function G(i,e,t){const o=i.slice();return o[8]=e[t],o[10]=t,o}function ce(i){let e,t,o,r,l,n,d,s=i[1].length>0&&W(i);return{c(){e=b("div"),t=b("button"),o=N("Create Room"),r=I(),l=b("ul"),s&&s.c(),this.h()},l(c){e=v(c,"DIV",{class:!0});var h=p(e);t=v(h,"BUTTON",{class:!0});var a=p(t);o=B(a,"Create Room"),a.forEach(u),r=j(h),l=v(h,"UL",{class:!0});var f=p(l);s&&s.l(f),f.forEach(u),h.forEach(u),this.h()},h(){m(t,"class","px-8 py-1 max-w-[30%] text-m text-black-600 font-semibold bg-gray-50 rounded border border-gray-200 hover:text-white hover:bg-purple-600 hover:border-transparent focus:outline-none focus:ring-2 focus:ring-purple-600 focus:ring-offset-2"),m(l,"class","flex flex-col gap-5"),m(e,"class","flex m-7 flex-col gap-9 ")},m(c,h){k(c,e,h),g(e,t),g(t,o),g(e,r),g(e,l),s&&s.m(l,null),n||(d=$(t,"click",i[4]),n=!0)},p(c,h){c[1].length>0?s?s.p(c,h):(s=W(c),s.c(),s.m(l,null)):s&&(s.d(1),s=null)},i:w,o:w,d(c){c&&u(e),s&&s.d(),n=!1,d()}}}function ie(i){let e,t,o,r,l,n,d,s=i[0],c=[];for(let a=0;a<s.length;a+=1)c[a]=K(G(i,s,a));const h=a=>O(c[a],1,1,()=>{c[a]=null});return{c(){e=b("button"),t=N("Exit"),o=I(),r=b("div");for(let a=0;a<c.length;a+=1)c[a].c();this.h()},l(a){e=v(a,"BUTTON",{class:!0});var f=p(e);t=B(f,"Exit"),f.forEach(u),o=j(a),r=v(a,"DIV",{class:!0});var _=p(r);for(let y=0;y<c.length;y+=1)c[y].l(_);_.forEach(u),this.h()},h(){m(e,"class","mt-3 px-6 p-3 max-w-sm mx-auto bg-white text-black-600 font-semibold rounded-xl shadow-lg flex items-center border border-gray-200 space-x-4 hover:text-white hover:bg-purple-600 hover:border-transparent focus:outline-none focus:ring-2 focus:ring-purple-600 focus:ring-offset-2"),m(r,"class","flex flex-wrap m-7 justify-center")},m(a,f){k(a,e,f),g(e,t),k(a,o,f),k(a,r,f);for(let _=0;_<c.length;_+=1)c[_].m(r,null);l=!0,n||(d=$(e,"click",i[6]),n=!0)},p(a,f){if(f&1){s=a[0];let _;for(_=0;_<s.length;_+=1){const y=G(a,s,_);c[_]?(c[_].p(y,f),E(c[_],1)):(c[_]=K(y),c[_].c(),E(c[_],1),c[_].m(r,null))}for(Z(),_=s.length;_<c.length;_+=1)h(_);z()}},i(a){if(!l){for(let f=0;f<s.length;f+=1)E(c[f]);l=!0}},o(a){c=c.filter(Boolean);for(let f=0;f<c.length;f+=1)O(c[f]);l=!1},d(a){a&&u(e),a&&u(o),a&&u(r),F(c,a),n=!1,d()}}}function ue(i){let e,t,o;return{c(){e=b("section"),t=b("h1"),o=N("Could not connect to server"),this.h()},l(r){e=v(r,"SECTION",{class:!0});var l=p(e);t=v(l,"H1",{class:!0});var n=p(t);o=B(n,"Could not connect to server"),n.forEach(u),l.forEach(u),this.h()},h(){m(t,"class","p-[3rem] font-mono text-3xl font-semibold"),m(e,"class","flex h-screen justify-center items-center")},m(r,l){k(r,e,l),g(e,t),g(t,o)},p:w,i:w,o:w,d(r){r&&u(e)}}}function fe(i){let e,t,o,r;return{c(){e=b("div"),t=M("svg"),o=M("path"),r=M("animateTransform"),this.h()},l(l){e=v(l,"DIV",{class:!0});var n=p(e);t=R(n,"svg",{width:!0,height:!0,viewBox:!0,xmlns:!0});var d=p(t);o=R(d,"path",{d:!0});var s=p(o);r=R(s,"animateTransform",{attributeName:!0,type:!0,calcMode:!0,dur:!0,values:!0,repeatCount:!0}),p(r).forEach(u),s.forEach(u),d.forEach(u),n.forEach(u),this.h()},h(){m(r,"attributeName","transform"),m(r,"type","rotate"),m(r,"calcMode","linear"),m(r,"dur","0.75s"),m(r,"values","0 12 12;360 12 12"),m(r,"repeatCount","indefinite"),m(o,"d","M12,23a9.63,9.63,0,0,1-8-9.5,9.51,9.51,0,0,1,6.79-9.1A1.66,1.66,0,0,0,12,2.81h0a1.67,1.67,0,0,0-1.94-1.64A11,11,0,0,0,12,23Z"),m(t,"width","89"),m(t,"height","89"),m(t,"viewBox","0 0 24 24"),m(t,"xmlns","http://www.w3.org/2000/svg"),m(e,"class","flex h-screen justify-center items-center")},m(l,n){k(l,e,n),g(e,t),g(t,o),g(o,r)},p:w,i:w,o:w,d(l){l&&u(e)}}}function W(i){let e,t=i[1],o=[];for(let r=0;r<t.length;r+=1)o[r]=H(q(i,t,r));return{c(){for(let r=0;r<o.length;r+=1)o[r].c();e=V()},l(r){for(let l=0;l<o.length;l+=1)o[l].l(r);e=V()},m(r,l){for(let n=0;n<o.length;n+=1)o[n].m(r,l);k(r,e,l)},p(r,l){if(l&34){t=r[1];let n;for(n=0;n<t.length;n+=1){const d=q(r,t,n);o[n]?o[n].p(d,l):(o[n]=H(d),o[n].c(),o[n].m(e.parentNode,e))}for(;n<o.length;n+=1)o[n].d(1);o.length=t.length}},d(r){F(o,r),r&&u(e)}}}function H(i){let e,t,o,r=i[11]+"",l,n,d,s;function c(){return i[7](i[11])}return{c(){e=b("li"),t=b("button"),o=N("Join Room "),l=N(r),n=I(),this.h()},l(h){e=v(h,"LI",{});var a=p(e);t=v(a,"BUTTON",{class:!0});var f=p(t);o=B(f,"Join Room "),l=B(f,r),f.forEach(u),n=j(a),a.forEach(u),this.h()},h(){m(t,"class","px-8 py-1 w-[70%] text-m text-black-600 font-semibold bg-gray-50 rounded border border-gray-200 hover:text-white hover:bg-purple-600 hover:border-transparent focus:outline-none focus:ring-2 focus:ring-purple-600 focus:ring-offset-2")},m(h,a){k(h,e,a),g(e,t),g(t,o),g(t,l),g(e,n),d||(s=$(t,"click",c),d=!0)},p(h,a){i=h,a&2&&r!==(r=i[11]+"")&&P(l,r)},d(h){h&&u(e),d=!1,s()}}}function K(i){let e,t;return e=new ae({props:{tile_num:i[8].tile_num,color:i[8].color}}),{c(){Q(e.$$.fragment)},l(o){X(e.$$.fragment,o)},m(o,r){Y(e,o,r),t=!0},p(o,r){const l={};r&1&&(l.tile_num=o[8].tile_num),r&1&&(l.color=o[8].color),e.$set(l)},i(o){t||(E(e.$$.fragment,o),t=!0)},o(o){O(e.$$.fragment,o),t=!1},d(o){ee(e,o)}}}function de(i){let e,t,o,r;const l=[fe,ue,ie,ce],n=[];function d(s,c){return s[2]?0:s[3]?1:s[0]&&s[0].length>0?2:3}return t=d(i),o=n[t]=l[t](i),{c(){e=b("div"),o.c()},l(s){e=v(s,"DIV",{});var c=p(e);o.l(c),c.forEach(u)},m(s,c){k(s,e,c),n[t].m(e,null),r=!0},p(s,[c]){let h=t;t=d(s),t===h?n[t].p(s,c):(Z(),O(n[h],1,1,()=>{n[h]=null}),z(),o=n[t],o?o.p(s,c):(o=n[t]=l[t](s),o.c()),E(o,1),o.m(e,null))},i(s){r||(E(o),r=!0)},o(s){O(o),r=!1},d(s){s&&u(e),n[t].d()}}}function he(i,e,t){let o=x(T),r=x(S),l=!0,n=!1;oe(()=>{try{ne(),T.subscribe(a=>{console.log({changed:a}),t(0,o=x(T)),t(2,l=!1)}),S.subscribe(()=>{t(1,r=x(S))})}catch(a){console.log("Error happened"),console.error(a),t(2,l=!1),t(3,n=!0)}});function d(){const a=x(C);a.socket&&a.socket.send("create")}function s(a){const f=x(C);f.socket&&f.socket.send(`join
${a}`)}function c(){const a=x(C);a.socket&&(a.socket.send("exit"),T.update(()=>[]))}return[o,r,l,n,d,s,c,a=>{s(a)}]}class me extends J{constructor(e){super(),L(this,e,he,de,U,{})}}function _e(i){let e,t,o,r,l;return r=new me({}),{c(){e=b("meta"),t=I(),o=b("section"),Q(r.$$.fragment),this.h()},l(n){const d=re('[data-svelte="svelte-t32ptj"]',document.head);e=v(d,"META",{name:!0,content:!0}),d.forEach(u),t=j(n),o=v(n,"SECTION",{});var s=p(o);X(r.$$.fragment,s),s.forEach(u),this.h()},h(){document.title="Home",m(e,"name","description"),m(e,"content","Svelte demo app")},m(n,d){g(document.head,e),k(n,t,d),k(n,o,d),Y(r,o,null),l=!0},p:w,i(n){l||(E(r.$$.fragment,n),l=!0)},o(n){O(r.$$.fragment,n),l=!1},d(n){u(e),n&&u(t),n&&u(o),ee(r)}}}const be=!0;class ve extends J{constructor(e){super(),L(this,e,null,_e,U,{})}}export{ve as default,be as prerender};
