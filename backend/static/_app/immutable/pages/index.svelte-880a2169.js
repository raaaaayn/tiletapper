import{S as J,i as j,s as U,e as p,t as E,c as b,a as k,h as N,d as f,b as v,f as M,g,J as m,K as C,j as H,E as x,L as y,k as S,l as R,m as I,q as w,o as $,v as te,n as K,p as z,M as F,w as Q,x as X,y as Y,B as Z,N as oe}from"../chunks/index-8c70ec66.js";import{w as D}from"../chunks/index-2efb8b73.js";const O=D({socket:null,loading:!0}),L=D([]),ee=[],B=D(ee),le=()=>{const a=new WebSocket("/ws");return O.update(()=>({socket:a,loading:!1})),a.addEventListener("open",function(){console.log("It's open")}),a.addEventListener("message",function(e){if(e.data&&e.data.startsWith("board")){const o=JSON.parse(e.data.split(`
`)[1]);console.log(ee),B.update(()=>o)}else if(e.data&&e.data.startsWith("rooms"))L.update(()=>e.data.split(`
`).slice(1,-1));else{const o=JSON.parse(e.data.split(`
`)[1]);console.log({result:o}),B.update(t=>t.map(n=>(console.log(n,o),n.tile_num!=o.tile_num?n:o)))}}),a};function ne(a){let e,o,t,n;return{c(){e=p("button"),o=E(a[0]),this.h()},l(r){e=b(r,"BUTTON",{class:!0,style:!0});var l=k(e);o=N(l,a[0]),l.forEach(f),this.h()},h(){v(e,"class","h-20 shrink-1 grow-1 grid-button border border-gray-300 sm:border-6 svelte-84fhyl"),M(e,"background-color",a[1]||"white")},m(r,l){g(r,e,l),m(e,o),t||(n=C(e,"click",a[2]),t=!0)},p(r,[l]){l&1&&H(o,r[0]),l&2&&M(e,"background-color",r[1]||"white")},i:x,o:x,d(r){r&&f(e),t=!1,n()}}}function re(a,e,o){let{tile_num:t}=e,{color:n}=e;function r(){const l=y(O);l.socket&&l.socket.send(JSON.stringify({tile_num:t}))}return a.$$set=l=>{"tile_num"in l&&o(0,t=l.tile_num),"color"in l&&o(1,n=l.color)},[t,n,r]}class se extends J{constructor(e){super(),j(this,e,re,ne,U,{tile_num:0,color:1})}}function V(a,e,o){const t=a.slice();return t[10]=e[o],t}function q(a,e,o){const t=a.slice();return t[7]=e[o],t[9]=o,t}function G(a){let e,o;return{c(){e=p("p"),o=E("Loading...")},l(t){e=b(t,"P",{});var n=k(e);o=N(n,"Loading..."),n.forEach(f)},m(t,n){g(t,e,n),m(e,o)},d(t){t&&f(e)}}}function ie(a){let e,o,t,n;const r=[ue,ae],l=[];function d(i,u){return i[0]&&i[0].length>0?0:i[2]?-1:1}return~(o=d(a))&&(t=l[o]=r[o](a)),{c(){e=p("div"),t&&t.c(),this.h()},l(i){e=b(i,"DIV",{class:!0});var u=k(e);t&&t.l(u),u.forEach(f),this.h()},h(){v(e,"class","")},m(i,u){g(i,e,u),~o&&l[o].m(e,null),n=!0},p(i,u){let s=o;o=d(i),o===s?~o&&l[o].p(i,u):(t&&(K(),$(l[s],1,1,()=>{l[s]=null}),z()),~o?(t=l[o],t?t.p(i,u):(t=l[o]=r[o](i),t.c()),w(t,1),t.m(e,null)):t=null)},i(i){n||(w(t),n=!0)},o(i){$(t),n=!1},d(i){i&&f(e),~o&&l[o].d()}}}function ce(a){let e,o,t;return{c(){e=p("div"),o=p("p"),t=E("Could not connect to server")},l(n){e=b(n,"DIV",{});var r=k(e);o=b(r,"P",{});var l=k(o);t=N(l,"Could not connect to server"),l.forEach(f),r.forEach(f)},m(n,r){g(n,e,r),m(e,o),m(o,t)},p:x,i:x,o:x,d(n){n&&f(e)}}}function ae(a){let e,o,t,n,r,l,d,i=a[1].length>0&&W(a);return{c(){e=p("div"),o=p("button"),t=E("Create Room"),n=S(),r=p("ul"),i&&i.c(),this.h()},l(u){e=b(u,"DIV",{class:!0});var s=k(e);o=b(s,"BUTTON",{class:!0});var c=k(o);t=N(c,"Create Room"),c.forEach(f),n=I(s),r=b(s,"UL",{class:!0});var _=k(r);i&&i.l(_),_.forEach(f),s.forEach(f),this.h()},h(){v(o,"class","px-8 py-1 max-w-[30%] text-m text-black-600 font-semibold bg-gray-50 rounded border border-gray-200 hover:text-white hover:bg-purple-600 hover:border-transparent focus:outline-none focus:ring-2 focus:ring-purple-600 focus:ring-offset-2"),v(r,"class","flex flex-col gap-5"),v(e,"class","flex m-7 flex-col gap-9 ")},m(u,s){g(u,e,s),m(e,o),m(o,t),m(e,n),m(e,r),i&&i.m(r,null),l||(d=C(o,"click",a[3]),l=!0)},p(u,s){u[1].length>0?i?i.p(u,s):(i=W(u),i.c(),i.m(r,null)):i&&(i.d(1),i=null)},i:x,o:x,d(u){u&&f(e),i&&i.d(),l=!1,d()}}}function ue(a){let e,o,t,n,r,l,d,i=a[0],u=[];for(let c=0;c<i.length;c+=1)u[c]=P(q(a,i,c));const s=c=>$(u[c],1,1,()=>{u[c]=null});return{c(){e=p("button"),o=E("Exit"),t=S(),n=p("div");for(let c=0;c<u.length;c+=1)u[c].c();this.h()},l(c){e=b(c,"BUTTON",{class:!0});var _=k(e);o=N(_,"Exit"),_.forEach(f),t=I(c),n=b(c,"DIV",{class:!0});var h=k(n);for(let T=0;T<u.length;T+=1)u[T].l(h);h.forEach(f),this.h()},h(){v(e,"class","mt-3 px-6 p-3 max-w-sm mx-auto bg-white text-black-600 font-semibold rounded-xl shadow-lg flex items-center border border-gray-200 space-x-4 hover:text-white hover:bg-purple-600 hover:border-transparent focus:outline-none focus:ring-2 focus:ring-purple-600 focus:ring-offset-2"),v(n,"class","flex flex-wrap m-7 justify-center")},m(c,_){g(c,e,_),m(e,o),g(c,t,_),g(c,n,_);for(let h=0;h<u.length;h+=1)u[h].m(n,null);r=!0,l||(d=C(e,"click",a[5]),l=!0)},p(c,_){if(_&1){i=c[0];let h;for(h=0;h<i.length;h+=1){const T=q(c,i,h);u[h]?(u[h].p(T,_),w(u[h],1)):(u[h]=P(T),u[h].c(),w(u[h],1),u[h].m(n,null))}for(K(),h=i.length;h<u.length;h+=1)s(h);z()}},i(c){if(!r){for(let _=0;_<i.length;_+=1)w(u[_]);r=!0}},o(c){u=u.filter(Boolean);for(let _=0;_<u.length;_+=1)$(u[_]);r=!1},d(c){c&&f(e),c&&f(t),c&&f(n),F(u,c),l=!1,d()}}}function W(a){let e,o=a[1],t=[];for(let n=0;n<o.length;n+=1)t[n]=A(V(a,o,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=R()},l(n){for(let r=0;r<t.length;r+=1)t[r].l(n);e=R()},m(n,r){for(let l=0;l<t.length;l+=1)t[l].m(n,r);g(n,e,r)},p(n,r){if(r&18){o=n[1];let l;for(l=0;l<o.length;l+=1){const d=V(n,o,l);t[l]?t[l].p(d,r):(t[l]=A(d),t[l].c(),t[l].m(e.parentNode,e))}for(;l<t.length;l+=1)t[l].d(1);t.length=o.length}},d(n){F(t,n),n&&f(e)}}}function A(a){let e,o,t,n=a[10]+"",r,l,d,i;function u(){return a[6](a[10])}return{c(){e=p("li"),o=p("button"),t=E("Join Room "),r=E(n),l=S(),this.h()},l(s){e=b(s,"LI",{});var c=k(e);o=b(c,"BUTTON",{class:!0});var _=k(o);t=N(_,"Join Room "),r=N(_,n),_.forEach(f),l=I(c),c.forEach(f),this.h()},h(){v(o,"class","px-8 py-1 w-[70%] text-m text-black-600 font-semibold bg-gray-50 rounded border border-gray-200 hover:text-white hover:bg-purple-600 hover:border-transparent focus:outline-none focus:ring-2 focus:ring-purple-600 focus:ring-offset-2")},m(s,c){g(s,e,c),m(e,o),m(o,t),m(o,r),m(e,l),d||(i=C(o,"click",u),d=!0)},p(s,c){a=s,c&2&&n!==(n=a[10]+"")&&H(r,n)},d(s){s&&f(e),d=!1,i()}}}function P(a){let e,o;return e=new se({props:{tile_num:a[7].tile_num,color:a[7].color}}),{c(){Q(e.$$.fragment)},l(t){X(e.$$.fragment,t)},m(t,n){Y(e,t,n),o=!0},p(t,n){const r={};n&1&&(r.tile_num=t[7].tile_num),n&1&&(r.color=t[7].color),e.$set(r)},i(t){o||(w(e.$$.fragment,t),o=!0)},o(t){$(e.$$.fragment,t),o=!1},d(t){Z(e,t)}}}function fe(a){let e,o,t,n,r,l=a[2]&&G();const d=[ce,ie],i=[];function u(s,c){return 1}return o=u(),t=i[o]=d[o](a),{c(){l&&l.c(),e=S(),t.c(),n=R()},l(s){l&&l.l(s),e=I(s),t.l(s),n=R()},m(s,c){l&&l.m(s,c),g(s,e,c),i[o].m(s,c),g(s,n,c),r=!0},p(s,[c]){s[2]?l||(l=G(),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),t.p(s,c)},i(s){r||(w(t),r=!0)},o(s){$(t),r=!1},d(s){l&&l.d(s),s&&f(e),i[o].d(s),s&&f(n)}}}function de(a,e,o){let t=y(B),n=y(L),r=!0;te(()=>{try{le(),B.subscribe(s=>{console.log({changed:s}),o(0,t=y(B)),o(2,r=!1)}),L.subscribe(()=>{o(1,n=y(L))})}catch(s){console.error(s),o(2,r=!1),s=!0}});function l(){const s=y(O);s.socket&&s.socket.send("create")}function d(s){const c=y(O);c.socket&&c.socket.send(`join
${s}`)}function i(){const s=y(O);s.socket&&(s.socket.send("exit"),B.update(()=>[]))}return[t,n,r,l,d,i,s=>{d(s)}]}class _e extends J{constructor(e){super(),j(this,e,de,fe,U,{})}}function he(a){let e,o,t,n,r;return n=new _e({}),{c(){e=p("meta"),o=S(),t=p("section"),Q(n.$$.fragment),this.h()},l(l){const d=oe('[data-svelte="svelte-t32ptj"]',document.head);e=b(d,"META",{name:!0,content:!0}),d.forEach(f),o=I(l),t=b(l,"SECTION",{});var i=k(t);X(n.$$.fragment,i),i.forEach(f),this.h()},h(){document.title="Home",v(e,"name","description"),v(e,"content","Svelte demo app")},m(l,d){m(document.head,e),g(l,o,d),g(l,t,d),Y(n,t,null),r=!0},p:x,i(l){r||(w(n.$$.fragment,l),r=!0)},o(l){$(n.$$.fragment,l),r=!1},d(l){f(e),l&&f(o),l&&f(t),Z(n)}}}const be=!0;class ge extends J{constructor(e){super(),j(this,e,null,he,U,{})}}export{ge as default,be as prerender};
